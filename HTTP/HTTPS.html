<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>백엔드 서버에 https 적용하기</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="desc">
    
    <link rel="preload" href="/assets/css/0.styles.d419143b.css" as="style"><link rel="preload" href="/assets/js/app.2e885023.js" as="script"><link rel="preload" href="/assets/js/2.fd64779e.js" as="script"><link rel="preload" href="/assets/js/1.87595a30.js" as="script"><link rel="preload" href="/assets/js/22.6fc5e8df.js" as="script"><link rel="prefetch" href="/assets/js/10.f3b75cb1.js"><link rel="prefetch" href="/assets/js/11.976b005d.js"><link rel="prefetch" href="/assets/js/12.c204bb4e.js"><link rel="prefetch" href="/assets/js/13.73e86676.js"><link rel="prefetch" href="/assets/js/14.42991e2a.js"><link rel="prefetch" href="/assets/js/15.8b128397.js"><link rel="prefetch" href="/assets/js/16.e37df2a1.js"><link rel="prefetch" href="/assets/js/17.1678b209.js"><link rel="prefetch" href="/assets/js/18.87da4873.js"><link rel="prefetch" href="/assets/js/19.0741f0b9.js"><link rel="prefetch" href="/assets/js/20.9f94b747.js"><link rel="prefetch" href="/assets/js/21.60375cff.js"><link rel="prefetch" href="/assets/js/23.246218c8.js"><link rel="prefetch" href="/assets/js/24.55e28573.js"><link rel="prefetch" href="/assets/js/25.6d2df8c3.js"><link rel="prefetch" href="/assets/js/26.d517e4a1.js"><link rel="prefetch" href="/assets/js/27.62268fa0.js"><link rel="prefetch" href="/assets/js/28.63328ffa.js"><link rel="prefetch" href="/assets/js/29.8b2cee60.js"><link rel="prefetch" href="/assets/js/3.e8eb28a6.js"><link rel="prefetch" href="/assets/js/4.2b3e3d8f.js"><link rel="prefetch" href="/assets/js/5.45c61f29.js"><link rel="prefetch" href="/assets/js/6.d4352767.js"><link rel="prefetch" href="/assets/js/7.955a46ff.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.b7a3ab4f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d419143b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/amazon7737" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/amazon7737" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Index</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>HTTP</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/HTTP/HTTPS.html" aria-current="page" class="active sidebar-link">백엔드 서버에 https 적용하기</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/HTTP/HTTPS.html#백엔드-서버에-https-적용하기" class="sidebar-link">백엔드 서버에 https 적용하기</a></li><li class="sidebar-sub-header"><a href="/HTTP/HTTPS.html#문제-https-프론트-서버에서-http-백엔드-서버로-요청을-진행할때-발생하는-문제" class="sidebar-link">문제 : https 프론트 서버에서 http 백엔드 서버로 요청을 진행할때 발생하는 문제</a></li><li class="sidebar-sub-header"><a href="/HTTP/HTTPS.html#참고" class="sidebar-link">참고</a></li></ul></li><li><a href="/HTTP/HTTP_상태_코드.html" class="sidebar-link">HTTP 상태 코드</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MySQL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="백엔드-서버에-https-적용하기"><a href="#백엔드-서버에-https-적용하기" class="header-anchor">#</a> 백엔드 서버에 https 적용하기</h2> <blockquote><p>프론트 서버를 배포하고 백엔드 서버에 접근하지 못하는 문제가 발생했다.</p></blockquote> <h2 id="문제-https-프론트-서버에서-http-백엔드-서버로-요청을-진행할때-발생하는-문제"><a href="#문제-https-프론트-서버에서-http-백엔드-서버로-요청을-진행할때-발생하는-문제" class="header-anchor">#</a> 문제 : https 프론트 서버에서 http 백엔드 서버로 요청을 진행할때 발생하는 문제</h2> <p>현재 나의 EC2 서버위에 올라간 API 서버 접근은 https가 세팅되어있지 않다 어떻게 해야할까?</p> <p>옛날엔 EC2 서버에 SSL 인증서를 직접 설치하는 방식으로 https 를 달았지만 무료 인증서라 기간이 지나면 계속 갱신해야 되는 문제가 있다. 어떤 분들은 cron 스케줄링까지 걸어서 인증서 갱신을 매주, 90일마다 갱신을 시도하거나 인증서 기간을 10년치 주는 회사를 찾아서 사용하기도 한다. 다른 방법을 찾아보았다.</p> <p>제일 흔한 방법은 도메인을 구매, 로드밸런서를 생성하여 ssl 인증서를 등록하고 ec2 서버로 접근 시키는 방법이다.
작업이 잘 안됬다
그래서 도메인 없이도 https를 할수 없을까 일주일을 찾아보았다.</p> <p>Caddy 는 https를 붙여주는 DNS라고 한다. 오픈소스이고 무료로 사용할 수 있다.</p> <img src="https://www.google.com/url?sa=i&amp;url=https%3A%2F%2Fcaddy.community%2Ft%2Fusing-caddy-as-a-reverse-proxy-in-a-home-network%2F9427&amp;psig=AOvVaw2touZiE6xLD6FDqn608sTx&amp;ust=1718005816784000&amp;source=images&amp;cd=vfe&amp;opi=89978449&amp;ved=0CBIQjRxqFwoTCPCe78SEzoYDFQAAAAAdAAAAABAE"> <p><img src="0dbf52c145819810e48c366a00145608e288b8f8.png" alt="img">
EC2 서버에 인바운드 규칙에도 22, 80, 443 을 열어주는건 무조건 해야하고</p> <p>EC2 서버에 https 로 접근을 시도하면 Caddy가 그걸 받아서 Reverse Proxy를 해주는 방식이다</p> <p>Caddy 를 실행하면 자동으로 ssl 인증서를 발급해서 사용하는 방식이다 너무 간편하고 좋다!</p> <p>Caddy 공식문서도 있으니 참고하면 매우 좋다</p> <hr> <h5 id="또다른-방법-docker에서-certbot을-실행하여-인증서를-발급"><a href="#또다른-방법-docker에서-certbot을-실행하여-인증서를-발급" class="header-anchor">#</a> 또다른 방법 Docker에서 CertBot을 실행하여 인증서를 발급</h5> <p>https://velog.io/@jungsangu/Docker%EB%A1%9C-Lets-Encrypt-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%B0%9C%EA%B8%89%ED%95%98%EA%B8%B0-%EB%8F%84%EB%A9%94%EC%9D%B8-%EB%B0%9C%EA%B8%89-%EC%97%86%EC%9D%B4</p> <h5 id="방법3-nginx로-reverse-proxy-제어"><a href="#방법3-nginx로-reverse-proxy-제어" class="header-anchor">#</a> 방법3 : NginX로 Reverse Proxy 제어</h5> <h2 id="참고"><a href="#참고" class="header-anchor">#</a> 참고</h2> <p>https://velog.io/@miro7923/AWS-EC2-%EC%84%9C%EB%B2%84-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%97%86%EC%9D%B4-https-%EB%B6%99%EC%9D%B4%EA%B8%B0</p> <p>https://caddyserver.com/docs/getting-started</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/" class="prev router-link-active">
        나의 기록장
      </a></span> <span class="next"><a href="/HTTP/HTTP_상태_코드.html">
        HTTP 상태 코드
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.2e885023.js" defer></script><script src="/assets/js/2.fd64779e.js" defer></script><script src="/assets/js/1.87595a30.js" defer></script><script src="/assets/js/22.6fc5e8df.js" defer></script>
  </body>
</html>
